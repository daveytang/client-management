<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Client Management</title>
</head>
<body>
    <h1>Client Management</h1>
    <ul id="client-list"></ul>

    <h2>Add New Client</h2>
    <form id="add-client-form">
        <label for="client-code">Client Code:</label>
        <input type="text" id="client-code" name="client-code" required>
        <br>
        <label for="client-name">Client Name:</label>
        <input type="text" id="client-name" name="client-name" required>
        <br>
        <label for="backend-url">Backend URL:</label>
        <input type="text" id="backend-url" name="backend-url" required>
        <br>
        <button type="submit">Add Client</button>
    </form>

    <script>
        // 获取客户列表
        fetch('/clients')
            .then(response => response.json())
            .then(data => {
                const clientList = document.getElementById('client-list');
                data.forEach(client => {
                    const li = document.createElement('li');
                    const a = document.createElement('a');
                    a.href = client.backend_url;
                    a.textContent = `${client.client_code} - ${client.client_name}`;
                    li.appendChild(a);
                    clientList.appendChild(li);
                });
            });

        // 添加新客户
        document.getElementById('add-client-form').addEventListener('submit', function(event) {
            event.preventDefault();
            const client = {
                client_code: document.getElementById('client-code').value,
                client_name: document.getElementById('client-name').value,
                backend_url: document.getElementById('backend-url').value
            };
            fetch('/clients', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(client)
            }).then(response => {
                if (response.ok) {
                    alert('Client added successfully');
                    location.reload(); // 刷新页面
                }
            });
        });
    </script>
</body>
</html>